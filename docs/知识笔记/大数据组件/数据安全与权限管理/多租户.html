
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>多租户 · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    
    <link rel="stylesheet" href="../../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-mermaid-gb3/mermaid/mermaid.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-chapter-fold/chapter-fold.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    


    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="数据探查.html" />
    
    
    <link rel="prev" href="ldap.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../../">
            
                <a href="../../../">
            
                    
                        <b>1.1.</b>
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <span>
            
                    
                        <b>1.2.</b>
                    
                    Node Modules
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../../../node_modules/d3/README.md">
            
                <span>
            
                    
                        <b>1.2.1.</b>
                    
                    D 3
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="../../../node_modules/d3/CONTRIBUTING.md">
            
                <span>
            
                    
                        <b>1.2.1.1.</b>
                    
                    CONTRIBUTING
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../../../node_modules/dagre-d3-renderer/README.md">
            
                <span>
            
                    
                        <b>1.2.2.</b>
                    
                    Dagre D 3 Renderer
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="../../../node_modules/dagre-d3-renderer/todo.md">
            
                <span>
            
                    
                        <b>1.2.2.1.</b>
                    
                    Todo
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../../../node_modules/dagre-layout/README.md">
            
                <span>
            
                    
                        <b>1.2.3.</b>
                    
                    Dagre Layout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../../../node_modules/gitbook-plugin-back-to-top-button/README.md">
            
                <span>
            
                    
                        <b>1.2.4.</b>
                    
                    Gitbook Plugin Back To Top Button
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../../../node_modules/gitbook-plugin-chapter-fold/README.md">
            
                <span>
            
                    
                        <b>1.2.5.</b>
                    
                    Gitbook Plugin Chapter Fold
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../../../node_modules/gitbook-plugin-expandable-chapters/README.md">
            
                <span>
            
                    
                        <b>1.2.6.</b>
                    
                    Gitbook Plugin Expandable Chapters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="../../../node_modules/gitbook-plugin-expandable-chapters-small/README.md">
            
                <span>
            
                    
                        <b>1.2.7.</b>
                    
                    Gitbook Plugin Expandable Chapters Small
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8" data-path="../../../node_modules/gitbook-plugin-mermaid-gb3/README.md">
            
                <span>
            
                    
                        <b>1.2.8.</b>
                    
                    Gitbook Plugin Mermaid Gb 3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.9" data-path="../../../node_modules/gitbook-plugin-search-pro/README.md">
            
                <span>
            
                    
                        <b>1.2.9.</b>
                    
                    Gitbook Plugin Search Pro
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.10" data-path="../../../node_modules/gitbook-plugin-splitter/README.md">
            
                <span>
            
                    
                        <b>1.2.10.</b>
                    
                    Gitbook Plugin Splitter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.11" data-path="../../../node_modules/graphlib/README.md">
            
                <span>
            
                    
                        <b>1.2.11.</b>
                    
                    Graphlib
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.12" data-path="../../../node_modules/graphlibrary/README.md">
            
                <span>
            
                    
                        <b>1.2.12.</b>
                    
                    Graphlibrary
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.12.1" data-path="../../../node_modules/graphlibrary/todo.md">
            
                <span>
            
                    
                        <b>1.2.12.1.</b>
                    
                    Todo
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.13" data-path="../../../node_modules/he/README.md">
            
                <span>
            
                    
                        <b>1.2.13.</b>
                    
                    He
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.14" data-path="../../../node_modules/html-entities/README.md">
            
                <span>
            
                    
                        <b>1.2.14.</b>
                    
                    Html Entities
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.15" data-path="../../../node_modules/lodash/README.md">
            
                <span>
            
                    
                        <b>1.2.15.</b>
                    
                    Lodash
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.16" data-path="../../../node_modules/mermaid/README.md">
            
                <span>
            
                    
                        <b>1.2.16.</b>
                    
                    Mermaid
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.16.1" >
            
                <span>
            
                    
                        <b>1.2.16.1.</b>
                    
                    Src
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.16.1.1" >
            
                <span>
            
                    
                        <b>1.2.16.1.1.</b>
                    
                    Diagrams
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.16.1.1.1" >
            
                <span>
            
                    
                        <b>1.2.16.1.1.1.</b>
                    
                    Gantt
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.16.1.1.1.1" data-path="../../../node_modules/mermaid/src/diagrams/gantt/exGantt.md">
            
                <span>
            
                    
                        <b>1.2.16.1.1.1.1.</b>
                    
                    Ex Gantt
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.16.2" data-path="../../../node_modules/mermaid/CHANGELOG.md">
            
                <span>
            
                    
                        <b>1.2.16.2.</b>
                    
                    CHANGELOG
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.17" data-path="../../../node_modules/moment/README.md">
            
                <span>
            
                    
                        <b>1.2.17.</b>
                    
                    Moment
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.17.1" data-path="../../../node_modules/moment/CHANGELOG.md">
            
                <span>
            
                    
                        <b>1.2.17.1.</b>
                    
                    CHANGELOG
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../">
            
                <a href="../../">
            
                    
                        <b>1.3.</b>
                    
                    知识笔记
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" >
            
                <span>
            
                    
                        <b>1.3.1.</b>
                    
                    IDE
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../../IDE/idea/idea.html">
            
                <a href="../../IDE/idea/idea.html">
            
                    
                        <b>1.3.1.1.</b>
                    
                    Idea
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../../IDE/vscode/vscode.html">
            
                <a href="../../IDE/vscode/vscode.html">
            
                    
                        <b>1.3.1.2.</b>
                    
                    Vscode
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" >
            
                <span>
            
                    
                        <b>1.3.2.</b>
                    
                    Java
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" >
            
                <span>
            
                    
                        <b>1.3.2.1.</b>
                    
                    Maven
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1.1" data-path="../../java/maven/maven编译换行符问题.html">
            
                <a href="../../java/maven/maven编译换行符问题.html">
            
                    
                        <b>1.3.2.1.1.</b>
                    
                    maven编译换行符问题
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="../../java/spring/spring.html">
            
                <a href="../../java/spring/spring.html">
            
                    
                        <b>1.3.2.2.</b>
                    
                    Spring
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" >
            
                <span>
            
                    
                        <b>1.3.3.</b>
                    
                    Linux
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="../../linux/ftp/ftp.html">
            
                <a href="../../linux/ftp/ftp.html">
            
                    
                        <b>1.3.3.1.</b>
                    
                    Ftp
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2" >
            
                <span>
            
                    
                        <b>1.3.3.2.</b>
                    
                    Kereros
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.2.1" data-path="../../linux/kereros/cdh安装kerberos.html">
            
                <a href="../../linux/kereros/cdh安装kerberos.html">
            
                    
                        <b>1.3.3.2.1.</b>
                    
                    cdh安装kerberos
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3.3" data-path="../../linux/LDAP/LDAP.html">
            
                <a href="../../linux/LDAP/LDAP.html">
            
                    
                        <b>1.3.3.3.</b>
                    
                    LDAP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.4" data-path="../../linux/开启图形化页面.html">
            
                <a href="../../linux/开启图形化页面.html">
            
                    
                        <b>1.3.3.4.</b>
                    
                    开启图形化页面
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.5" data-path="../../linux/离线环境使用yum.html">
            
                <a href="../../linux/离线环境使用yum.html">
            
                    
                        <b>1.3.3.5.</b>
                    
                    离线环境使用yum
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.6" data-path="../../linux/软链接.html">
            
                <a href="../../linux/软链接.html">
            
                    
                        <b>1.3.3.6.</b>
                    
                    软链接
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.4" >
            
                <span>
            
                    
                        <b>1.3.4.</b>
                    
                    Web
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.4.1" data-path="../../web/html/html.html">
            
                <a href="../../web/html/html.html">
            
                    
                        <b>1.3.4.1.</b>
                    
                    Html
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.4.1.1" data-path="../../web/html/基础概念.html">
            
                <a href="../../web/html/基础概念.html">
            
                    
                        <b>1.3.4.1.1.</b>
                    
                    基础概念
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.5" >
            
                <span>
            
                    
                        <b>1.3.5.</b>
                    
                    办公软件
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.5.1" >
            
                <span>
            
                    
                        <b>1.3.5.1.</b>
                    
                    Excel
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.5.1.1" data-path="../../办公软件/excel/目录导航宏.html">
            
                <a href="../../办公软件/excel/目录导航宏.html">
            
                    
                        <b>1.3.5.1.1.</b>
                    
                    目录导航宏
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.6" >
            
                <span>
            
                    
                        <b>1.3.6.</b>
                    
                    大数据组件
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.6.1" >
            
                <span>
            
                    
                        <b>1.3.6.1.</b>
                    
                    Hive
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.6.1.1" data-path="../hive/hive_on_spark.html">
            
                <a href="../hive/hive_on_spark.html">
            
                    
                        <b>1.3.6.1.1.</b>
                    
                    Hive On Spark
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6.1.2" data-path="../hive/hive_on_tez.html">
            
                <a href="../hive/hive_on_tez.html">
            
                    
                        <b>1.3.6.1.2.</b>
                    
                    Hive On Tez
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6.1.3" data-path="../hive/hive-Tips.html">
            
                <a href="../hive/hive-Tips.html">
            
                    
                        <b>1.3.6.1.3.</b>
                    
                    Hive Tips
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6.1.4" data-path="../hive/hive基础.html">
            
                <a href="../hive/hive基础.html">
            
                    
                        <b>1.3.6.1.4.</b>
                    
                    hive基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6.1.5" data-path="../hive/表结构导出.html">
            
                <a href="../hive/表结构导出.html">
            
                    
                        <b>1.3.6.1.5.</b>
                    
                    表结构导出
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.6.2" >
            
                <span>
            
                    
                        <b>1.3.6.2.</b>
                    
                    任务调度
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.6.2.1" data-path="../任务调度/etljc/etljc.html">
            
                <a href="../任务调度/etljc/etljc.html">
            
                    
                        <b>1.3.6.2.1.</b>
                    
                    Etljc
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.6.3" >
            
                <span>
            
                    
                        <b>1.3.6.3.</b>
                    
                    存储
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.6.3.1" data-path="../存储/hdfs/hdfs.html">
            
                <a href="../存储/hdfs/hdfs.html">
            
                    
                        <b>1.3.6.3.1.</b>
                    
                    Hdfs
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.6.3.1.1" data-path="../存储/hdfs/cdh-hdfs开启simple权限认证.html">
            
                <a href="../存储/hdfs/cdh-hdfs开启simple权限认证.html">
            
                    
                        <b>1.3.6.3.1.1.</b>
                    
                    cdh-hdfs开启simple权限认证
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6.3.1.2" data-path="../存储/hdfs/nn QJM问题.html">
            
                <a href="../存储/hdfs/nn QJM问题.html">
            
                    
                        <b>1.3.6.3.1.2.</b>
                    
                    nn QJM问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6.3.1.3" data-path="../存储/hdfs/orc.html">
            
                <a href="../存储/hdfs/orc.html">
            
                    
                        <b>1.3.6.3.1.3.</b>
                    
                    Orc
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.6.4" >
            
                <span>
            
                    
                        <b>1.3.6.4.</b>
                    
                    搜索
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.6.4.1" >
            
                <span>
            
                    
                        <b>1.3.6.4.1.</b>
                    
                    Es
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.6.4.1.1" data-path="../搜索/es/elasticsearch.html">
            
                <a href="../搜索/es/elasticsearch.html">
            
                    
                        <b>1.3.6.4.1.1.</b>
                    
                    Elasticsearch
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.6.5" >
            
                <span>
            
                    
                        <b>1.3.6.5.</b>
                    
                    数据安全与权限管理
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.6.5.1" data-path="kerberos.html">
            
                <a href="kerberos.html">
            
                    
                        <b>1.3.6.5.1.</b>
                    
                    Kerberos
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6.5.2" data-path="ldap.html">
            
                <a href="ldap.html">
            
                    
                        <b>1.3.6.5.2.</b>
                    
                    Ldap
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.6.5.3" data-path="多租户.html">
            
                <a href="多租户.html">
            
                    
                        <b>1.3.6.5.3.</b>
                    
                    多租户
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6.5.4" data-path="数据探查.html">
            
                <a href="数据探查.html">
            
                    
                        <b>1.3.6.5.4.</b>
                    
                    数据探查
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6.5.5" data-path="数据质量管理-griffin.html">
            
                <a href="数据质量管理-griffin.html">
            
                    
                        <b>1.3.6.5.5.</b>
                    
                    数据质量管理-griffin
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.6.6" >
            
                <span>
            
                    
                        <b>1.3.6.6.</b>
                    
                    数据采集与传输
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.6.6.1" data-path="../数据采集与传输/sqoop/sqoop.html">
            
                <a href="../数据采集与传输/sqoop/sqoop.html">
            
                    
                        <b>1.3.6.6.1.</b>
                    
                    Sqoop
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.6.7" >
            
                <span>
            
                    
                        <b>1.3.6.7.</b>
                    
                    架构设计
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.6.7.1" data-path="../架构设计/oppo实时大数据平台衍进.html">
            
                <a href="../架构设计/oppo实时大数据平台衍进.html">
            
                    
                        <b>1.3.6.7.1.</b>
                    
                    oppo实时大数据平台衍进
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.6.8" >
            
                <span>
            
                    
                        <b>1.3.6.8.</b>
                    
                    计算引擎
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.6.8.1" >
            
                <span>
            
                    
                        <b>1.3.6.8.1.</b>
                    
                    Mr
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.6.8.1.1" data-path="../计算引擎/mr/mapreduce.html">
            
                <a href="../计算引擎/mr/mapreduce.html">
            
                    
                        <b>1.3.6.8.1.1.</b>
                    
                    Mapreduce
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.6.8.2" data-path="../计算引擎/spark/spark.html">
            
                <a href="../计算引擎/spark/spark.html">
            
                    
                        <b>1.3.6.8.2.</b>
                    
                    Spark
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.6.9" >
            
                <span>
            
                    
                        <b>1.3.6.9.</b>
                    
                    资源调度
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.6.9.1" >
            
                <span>
            
                    
                        <b>1.3.6.9.1.</b>
                    
                    Yarn
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.6.9.1.1" data-path="../资源调度/yarn/cdh yarn 配置.html">
            
                <a href="../资源调度/yarn/cdh yarn 配置.html">
            
                    
                        <b>1.3.6.9.1.1.</b>
                    
                    cdh yarn 配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6.9.1.2" data-path="../资源调度/yarn/yarn-cdh队列隔离.html">
            
                <a href="../资源调度/yarn/yarn-cdh队列隔离.html">
            
                    
                        <b>1.3.6.9.1.2.</b>
                    
                    yarn-cdh队列隔离
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.7" >
            
                <span>
            
                    
                        <b>1.3.7.</b>
                    
                    版本管理
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.7.1" data-path="../../版本管理/git/git.html">
            
                <a href="../../版本管理/git/git.html">
            
                    
                        <b>1.3.7.1.</b>
                    
                    Git
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.7.1.1" data-path="../../版本管理/git/gitbash中文异常.html">
            
                <a href="../../版本管理/git/gitbash中文异常.html">
            
                    
                        <b>1.3.7.1.1.</b>
                    
                    gitbash中文异常
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.7.2" >
            
                <span>
            
                    
                        <b>1.3.7.2.</b>
                    
                    行内cc
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.7.2.1" data-path="../../版本管理/行内cc/出版本.html">
            
                <a href="../../版本管理/行内cc/出版本.html">
            
                    
                        <b>1.3.7.2.1.</b>
                    
                    出版本
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="../../甘特图/甘特图.html">
            
                <a href="../../甘特图/甘特图.html">
            
                    
                        <b>1.3.8.</b>
                    
                    甘特图
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" >
            
                <span>
            
                    
                        <b>1.3.9.</b>
                    
                    知识管理
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.9.1" data-path="../../知识管理/gitbook/gitbook.html">
            
                <a href="../../知识管理/gitbook/gitbook.html">
            
                    
                        <b>1.3.9.1.</b>
                    
                    Gitbook
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9.2" >
            
                <span>
            
                    
                        <b>1.3.9.2.</b>
                    
                    Mermaid
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.9.2.1" data-path="../../知识管理/mermaid/甘特图_Gantt.html">
            
                <a href="../../知识管理/mermaid/甘特图_Gantt.html">
            
                    
                        <b>1.3.9.2.1.</b>
                    
                    甘特图_Gantt
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.9.3" >
            
                <span>
            
                    
                        <b>1.3.9.3.</b>
                    
                    Typora
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.9.3.1" data-path="../../知识管理/typora/ppt_demo.html">
            
                <a href="../../知识管理/typora/ppt_demo.html">
            
                    
                        <b>1.3.9.3.1.</b>
                    
                    Ppt Demo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9.3.2" data-path="../../知识管理/typora/typora配置.html">
            
                <a href="../../知识管理/typora/typora配置.html">
            
                    
                        <b>1.3.9.3.2.</b>
                    
                    typora配置
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.10" >
            
                <span>
            
                    
                        <b>1.3.10.</b>
                    
                    网络协议
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.10.1" data-path="../../网络协议/postman/postman.html">
            
                <a href="../../网络协议/postman/postman.html">
            
                    
                        <b>1.3.10.1.</b>
                    
                    Postman
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.10.2" data-path="../../网络协议/rest/rest.html">
            
                <a href="../../网络协议/rest/rest.html">
            
                    
                        <b>1.3.10.2.</b>
                    
                    Rest
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.11" data-path="../../学习路线图.html">
            
                <a href="../../学习路线图.html">
            
                    
                        <b>1.3.11.</b>
                    
                    学习路线图
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../.." >多租户</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="ranger&#x7F16;&#x8BD1;&#x548C;&#x5B89;&#x88C5;">ranger&#x7F16;&#x8BD1;&#x548C;&#x5B89;&#x88C5;</h1>
<p>&#x817E;&#x8BAF;&#x8BFE;&#x5802; &#x89C6;&#x9891;&#xFF08;1.2.0&#xFF09;</p>
<p><a href="https://ke.qq.com/webcourse/index.html#cid=443147&amp;term_id=100529499&amp;taid=3859066770604811&amp;type=1024&amp;vid=5285890793895524135" target="_blank">https://ke.qq.com/webcourse/index.html#cid=443147&amp;term_id=100529499&amp;taid=3859066770604811&amp;type=1024&amp;vid=5285890793895524135</a></p>
<h2 id="&#x4E0B;&#x8F7D;">&#x4E0B;&#x8F7D;</h2>
<p>&#x4E0B;&#x8F7D; ranger</p>
<p>&#x76EE;&#x524D;&#x7248;&#x672C; 2.0.0 </p>
<p>&#x4E0B;&#x8F7D;&#x6E20;&#x9053;&#xFF0C;</p>
<p><a href="https://dist.apache.org/repos/dist/release/ranger/2.0.0/" target="_blank">https://dist.apache.org/repos/dist/release/ranger/2.0.0/</a></p>
<p>&#x4E0B;&#x4E86;release &#x7A33;&#x5B9A;&#x7248;&#xFF0C;&#x6CA1;&#x6709;&#x50CF;&#x5927;&#x90E8;&#x5206;&#x4EBA;&#x4ECE; gitlhub &#x76F4;&#x63A5;&#x4E0B;&#x8F7D;&#x6E90;&#x7801;&#x3002;</p>
<h2 id="&#x7F16;&#x8BD1;">&#x7F16;&#x8BD1;</h2>
<h3 id="&#x51C6;&#x5907;&#x5DE5;&#x4F5C;">&#x51C6;&#x5907;&#x5DE5;&#x4F5C;</h3>
<pre><code class="lang-shell">cd /d/wsl/setup
 tar -xvf apache-ranger-2.0.0.tar.gz 

## &#x76F4;&#x63A5;&#x628A;&#x540D;&#x5B57;&#x6539;&#x4E86;&#xFF0C;&#x6709;&#x65F6;&#x95F4;&#x5EFA;&#x8BAE;&#x5EFA;&#x8F6F;&#x8FDE;&#x63A5;
mv apache-ranger-2.0.0 ranger
</code></pre>
<p>&#x67E5;&#x770B; &#x6211;&#x6709;maven</p>
<pre><code class="lang-shell">mq5445@DESKTOP-7IL9SC5:/d/wsl/setup/ranger$ mvn --version
Apache Maven 3.6.0
Maven home: /usr/share/maven
Java version: 1.8.0_241, vendor: Oracle Corporation, runtime: /mnt/d/wsl/setup/java/jre
Default locale: en, platform encoding: UTF-8
OS name: &quot;linux&quot;, version: &quot;4.4.0-18362-microsoft&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;
</code></pre>
<p>&#x6839;&#x636E;cdh &#x7248;&#x672C;&#x6539; pom</p>
<p><a href="https://docs.cloudera.com/documentation/enterprise/6/release-notes/topics/rg_cdh_63_packaging.html" target="_blank">https://docs.cloudera.com/documentation/enterprise/6/release-notes/topics/rg_cdh_63_packaging.html</a></p>
<p>CDH 6.3.2</p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>Component</strong></th>
<th style="text-align:left"><strong>Component Version</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Apache Avro</td>
<td style="text-align:left">1.8.2</td>
</tr>
<tr>
<td style="text-align:left">Apache Flume</td>
<td style="text-align:left">1.9.0</td>
</tr>
<tr>
<td style="text-align:left">Apache Hadoop</td>
<td style="text-align:left">3.0.0</td>
</tr>
<tr>
<td style="text-align:left">Apache HBase</td>
<td style="text-align:left">2.1.4</td>
</tr>
<tr>
<td style="text-align:left">HBase Indexer</td>
<td style="text-align:left">1.5</td>
</tr>
<tr>
<td style="text-align:left">Apache Hive</td>
<td style="text-align:left">2.1.1</td>
</tr>
<tr>
<td style="text-align:left">Hue</td>
<td style="text-align:left">4.4.0</td>
</tr>
<tr>
<td style="text-align:left">Apache Impala</td>
<td style="text-align:left">3.2.0</td>
</tr>
<tr>
<td style="text-align:left">Apache Kafka</td>
<td style="text-align:left">2.2.1</td>
</tr>
<tr>
<td style="text-align:left">Kite SDK</td>
<td style="text-align:left">1.0.0</td>
</tr>
<tr>
<td style="text-align:left">Apache Kudu</td>
<td style="text-align:left">1.10.0</td>
</tr>
<tr>
<td style="text-align:left">Apache Solr</td>
<td style="text-align:left">7.4.0</td>
</tr>
<tr>
<td style="text-align:left">Apache Oozie</td>
<td style="text-align:left">5.1.0</td>
</tr>
<tr>
<td style="text-align:left">Apache Parquet</td>
<td style="text-align:left">1.9.0</td>
</tr>
<tr>
<td style="text-align:left">Parquet-format</td>
<td style="text-align:left">2.4.0</td>
</tr>
<tr>
<td style="text-align:left">Apache Pig</td>
<td style="text-align:left">0.17.0</td>
</tr>
<tr>
<td style="text-align:left">Apache Sentry</td>
<td style="text-align:left">2.1.0</td>
</tr>
<tr>
<td style="text-align:left">Apache Spark</td>
<td style="text-align:left">2.4.0</td>
</tr>
<tr>
<td style="text-align:left">Apache Sqoop</td>
<td style="text-align:left">1.4.7</td>
</tr>
<tr>
<td style="text-align:left">Apache ZooKeeper</td>
<td style="text-align:left">3.4.5</td>
</tr>
</tbody>
</table>
<p>&#x5BF9;&#x5E94;&#x4FEE;&#x6539; pom &#x6211;&#x6539;&#x4E86;&#x4EE5;&#x4E0B;&#x8FD9;&#x4E9B;</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">hadoop.version</span>&gt;</span>3.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">hadoop.version</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hive.version</span>&gt;</span>2.1.1<span class="hljs-tag">&lt;/<span class="hljs-name">hive.version</span>&gt;</span>   <span class="hljs-comment">&lt;!-- &#x8FD9;&#x4E2A;&#x4F1A;&#x8DDF;hadoop&#x7248;&#x672C;&#x51B2;&#x7A81; &#x540E;&#x9762;&#x4F1A;&#x8BF4;&#x600E;&#x4E48;&#x505A; --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">kafka.version</span>&gt;</span>2.2.1<span class="hljs-tag">&lt;/<span class="hljs-name">kafka.version</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">zookeeper.version</span>&gt;</span>3.4.5<span class="hljs-tag">&lt;/<span class="hljs-name">zookeeper.version</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">tomcat.embed.version</span>&gt;</span>7.0.105<span class="hljs-tag">&lt;/<span class="hljs-name">tomcat.embed.version</span>&gt;</span> <span class="hljs-comment">&lt;!-- &#x8FD9;&#x4E2A;&#x4F4E;&#x4E8E;&#x8FD9;&#x4E2A;&#x7248;&#x672C;&#x7531;&#x5B89;&#x5168;&#x6F0F;&#x6D1E; --&gt;</span>
</code></pre>
<p>hbase &#x7684;&#x7248;&#x672C;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x6539;&#x4E0B;&#x9762;&#x7684;&#x4F1A;&#x62A5;&#x9519;&#x3002;
&#x6240;&#x4EE5;&#x6CA1;&#x6539;&#x4FDD;&#x7559;&#x4E86; hbase 2.0.2&#x53BB;&#x7F16;&#x8BD1;&#xFF0C;&#x4E5F;&#x6709;&#x4EBA;&#x548C;&#x6211;&#x4E00;&#x6837;&#x8FD9;&#x91CC;&#x4F1A;&#x62A5;&#x9519;, &#x4E0B;&#x9762;&#x7684;&#x4E0D;&#x8981;&#x6309;cdh&#x7684;&#x6539;&#x3002;&#x4F1A;&#x6709;&#x95EE;&#x9898;</p>
<pre><code class="lang-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">hbase.version</span>&gt;</span>2.1.4<span class="hljs-tag">&lt;/<span class="hljs-name">hbase.version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">hbase-shaded-protobuf</span>&gt;</span>2.1.4<span class="hljs-tag">&lt;/<span class="hljs-name">hbase-shaded-protobuf</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">hbase-shaded-netty</span>&gt;</span>2.1.4<span class="hljs-tag">&lt;/<span class="hljs-name">hbase-shaded-netty</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">hbase-shaded-miscellaneous</span>&gt;</span>2.1.4<span class="hljs-tag">&lt;/<span class="hljs-name">hbase-shaded-miscellaneous</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">sqoop.version</span>&gt;</span>1.4.7<span class="hljs-tag">&lt;/<span class="hljs-name">sqoop.version</span>&gt;</span>
</code></pre>
<h3 id="&#x7F16;&#x8BD1;">&#x7F16;&#x8BD1;</h3>
<p>&#x5F00;&#x59CB;&#x7F16;&#x8BD1;</p>
<pre><code class="lang-shell">
mvn clean compile package assembly:assembly -Dpmd.skip=true  install -DskipTests -Drat.skip=true
</code></pre>
<p>&#x8FD9;&#x91CC; &#x8DF3;&#x8FC7;&#x4E86; pmd &#x9759;&#x6001;&#x4EE3;&#x7801;&#x68C0;&#x6D4B;&#x3002;&#x52A0;&#x4E0A;&#x4F1A;&#x62A5;&#x9519;&#x3002;&#x7279;&#x522B;&#x86CB;&#x75BC;&#x3002;&#x641E;&#x4E86;2&#x5929;&#x8FD9;&#x4E2A;&#x3002;</p>
<p>&#x770B;&#x6709;&#x7684;&#x4EBA;&#x8BF4;&#x8981;&#x88C5; git &#x548C; python</p>
<p>&#x6211;&#x7684;&#x90FD;&#x6709;</p>
<p>python &#x7248;&#x672C; </p>
<pre><code class="lang-she">mq5445@DESKTOP-7IL9SC5:~$ python --version
Python 2.7.17
</code></pre>
<pre><code class="lang-shell">Downloaded from alimaven: http://maven.aliyun.com/nexus/content/groups/public/net/minidev/json-smart/maven-metadata.xml (850 B at 435 B/s)
</code></pre>
<p>&#x8FD9;&#x91CC;&#x8865;&#x5145;&#x6DFB;&#x52A0;&#x4E86; osc &#x7684;&#x6E90;&#xFF0C;ali &#x7684;&#x4F3C;&#x4E4E;&#x6CA1;&#x6709;jboss</p>
<pre><code class="lang-shell">sudo vim /etc/maven/settings.xml
</code></pre>
<p>&#x627E;&#x5230; mirrors&#x4F4D;&#x7F6E;&#x91CC;&#x6DFB;&#x52A0;</p>
<pre><code class="lang-xml">
<span class="hljs-tag">&lt;<span class="hljs-name">mirror</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>osc<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mirrorOf</span>&gt;</span>*<span class="hljs-tag">&lt;/<span class="hljs-name">mirrorOf</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://maven.oschina.net/content/groups/public/<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">mirror</span>&gt;</span>
</code></pre>
<p>hbase &#x7248;&#x672C;&#x62A5;&#x9519;&#x3002;&#x770B;&#x6709;&#x7684;&#x8001;&#x54E5;&#x4E5F;&#x8FD9;&#x62A5;&#x9519;&#x3002;</p>
<p>&#x67E5;&#x4E86;&#x4E0B;</p>
<p>hive-agent &#x62A5;&#x9519;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;3.1.2 </p>
<p>&#x6539;2.1.1 &#x6709;&#x95EE;&#x9898;</p>
<p>&#x67E5;&#x4E86;&#x4E0B; ranger 0.7 &#x7248;&#x672C;&#x624D;&#x652F;&#x6301;2.1.1 &#x8FD9;&#x4E2A;&#x7248;&#x672C;&#x3002;</p>
<p>cdh &#x7684;&#x8FD9;&#x4E2A;hive&#x7248;&#x672C;&#x592A;&#x8001;&#x4E86;</p>
<p>&#x7F16;&#x8BD1;&#x5B8C;&#x4E86;&#x3002;&#x7528;&#x4E0D;&#x8D77;&#x6765;&#x3002;</p>
<p>&#x5927;&#x4F6C;&#x7684;&#x505A;&#x6CD5;&#x3002;</p>
<p><a href="https://blog.csdn.net/tomalun/article/details/105490214" target="_blank">https://blog.csdn.net/tomalun/article/details/105490214</a></p>
<p>&#x4E0B;&#x4E86;&#x4E2A; ranger 1.2.0 &#x628A;&#x5BF9;&#x5E94;&#x7684; hive-agent &#x8986;&#x76D6;&#x6389; ranger 2.0.0 &#x7684; hive-agent </p>
<p>&#x7B2C;10&#x6B21;&#x7F16;&#x8BD1;&#x540E;</p>
<pre><code class="lang-shell">[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] ranger 2.0.0 ....................................... SUCCESS [  0.714 s]
[INFO] Jdbc SQL Connector 2.0.0 ........................... SUCCESS [  0.362 s]
[INFO] Credential Support 2.0.0 ........................... SUCCESS [  1.299 s]
[INFO] Audit Component 2.0.0 .............................. SUCCESS [  1.586 s]
[INFO] Common library for Plugins 2.0.0 ................... SUCCESS [  2.552 s]
[INFO] Installer Support Component 2.0.0 .................. SUCCESS [  0.253 s]
[INFO] Credential Builder 2.0.0 ........................... SUCCESS [  1.004 s]
[INFO] Embedded Web Server Invoker 2.0.0 .................. SUCCESS [  1.253 s]
[INFO] Key Management Service 2.0.0 ....................... SUCCESS [  1.781 s]
[INFO] ranger-plugin-classloader 2.0.0 .................... SUCCESS [  0.310 s]
[INFO] HBase Security Plugin Shim 2.0.0 ................... SUCCESS [  2.004 s]
[INFO] HBase Security Plugin 2.0.0 ........................ SUCCESS [  2.483 s]
[INFO] Hdfs Security Plugin 2.0.0 ......................... SUCCESS [  1.517 s]
[INFO] Hive Security Plugin 1.2.0 ......................... SUCCESS [  2.599 s]
[INFO] Knox Security Plugin Shim 2.0.0 .................... SUCCESS [  1.584 s]
[INFO] Knox Security Plugin 2.0.0 ......................... SUCCESS [  2.815 s]
[INFO] Storm Security Plugin 2.0.0 ........................ SUCCESS [  1.566 s]
[INFO] YARN Security Plugin 2.0.0 ......................... SUCCESS [  1.439 s]
[INFO] Ozone Security Plugin 2.0.0 ........................ SUCCESS [  1.794 s]
[INFO] Ranger Util 2.0.0 .................................. SUCCESS [  3.815 s]
[INFO] Unix Authentication Client 2.0.0 ................... SUCCESS [  0.760 s]
[INFO] Security Admin Web Application 2.0.0 ............... SUCCESS [01:05 min]
[INFO] KAFKA Security Plugin 2.0.0 ........................ SUCCESS [  1.394 s]
[INFO] SOLR Security Plugin 2.0.0 ......................... SUCCESS [  3.854 s]
[INFO] NiFi Security Plugin 2.0.0 ......................... SUCCESS [  1.214 s]
[INFO] NiFi Registry Security Plugin 2.0.0 ................ SUCCESS [  1.188 s]
[INFO] Unix User Group Synchronizer 2.0.0 ................. SUCCESS [  1.736 s]
[INFO] Ldap Config Check Tool 2.0.0 ....................... SUCCESS [  0.456 s]
[INFO] Unix Authentication Service 2.0.0 .................. SUCCESS [  1.300 s]
[INFO] KMS Security Plugin 2.0.0 .......................... SUCCESS [  1.463 s]
[INFO] Tag Synchronizer 2.0.0 ............................. SUCCESS [  1.631 s]
[INFO] Hdfs Security Plugin Shim 2.0.0 .................... SUCCESS [  1.128 s]
[INFO] Hive Security Plugin Shim 2.0.0 .................... SUCCESS [  3.083 s]
[INFO] YARN Security Plugin Shim 2.0.0 .................... SUCCESS [  1.496 s]
[INFO] OZONE Security Plugin Shim 2.0.0 ................... SUCCESS [  1.766 s]
[INFO] Storm Security Plugin shim 2.0.0 ................... SUCCESS [  1.422 s]
[INFO] KAFKA Security Plugin Shim 2.0.0 ................... SUCCESS [  1.164 s]
[INFO] SOLR Security Plugin Shim 2.0.0 .................... SUCCESS [  1.994 s]
[INFO] Atlas Security Plugin Shim 2.0.0 ................... SUCCESS [  1.349 s]
[INFO] KMS Security Plugin Shim 2.0.0 ..................... SUCCESS [  1.464 s]
[INFO] ranger-examples 2.0.0 .............................. SUCCESS [  0.113 s]
[INFO] Ranger Examples - Conditions and ContextEnrichers 2.0.0 SUCCESS [  1.155 s]
[INFO] Ranger Examples - SampleApp 2.0.0 .................. SUCCESS [  0.264 s]
[INFO] Ranger Examples - Ranger Plugin for SampleApp 2.0.0  SUCCESS [  1.239 s]
[INFO] Ranger Tools 2.0.0 ................................. SUCCESS [  1.179 s]
[INFO] Atlas Security Plugin 2.0.0 ........................ SUCCESS [  1.484 s]
[INFO] Sqoop Security Plugin 2.0.0 ........................ SUCCESS [  1.313 s]
[INFO] Sqoop Security Plugin Shim 2.0.0 ................... SUCCESS [  1.196 s]
[INFO] Kylin Security Plugin 2.0.0 ........................ SUCCESS [  1.507 s]
[INFO] Kylin Security Plugin Shim 2.0.0 ................... SUCCESS [  1.401 s]
[INFO] Elasticsearch Security Plugin Shim 2.0.0 ........... SUCCESS [  0.454 s]
[INFO] Elasticsearch Security Plugin 2.0.0 ................ SUCCESS [  1.295 s]
[INFO] Presto Security Plugin 2.0.0 ....................... SUCCESS [  1.310 s]
[INFO] Presto Security Plugin Shim 2.0.0 .................. SUCCESS [  1.307 s]
[INFO] Unix Native Authenticator 2.0.0 .................... SUCCESS [  0.695 s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  42:43 min
[INFO] Finished at: 2020-07-22T10:12:59+08:00
[INFO] ------------------------------------------------------------------------
</code></pre>
<p>&#x7ED3;&#x679C;&#xFF1A;</p>
<pre><code class="lang-shell">root@DESKTOP-7IL9SC5:/mnt/d/wsl/setup/ranger# ll target/
total 1534276
drwxr-xr-x 1 root   root        4096 Jul 22 10:10 ./
drwxrwxr-x 1 mq5445 mq5445      4096 Jul 22 09:30 ../
-rw-r--r-- 1 root   root          30 Jul 22 10:10 .plxarc
drwxr-xr-x 1 root   root        4096 Jul 22 09:30 antrun/
drwxr-xr-x 1 root   root        4096 Jul 22 10:09 archive-tmp/
drwxr-xr-x 1 root   root        4096 Jul 22 09:30 maven-shared-archive-resources/
-rw-r--r-- 1 root   root   215913533 Jul 22 10:01 ranger-2.0.0-admin.tar.gz
-rw-r--r-- 1 root   root   217022494 Jul 22 10:03 ranger-2.0.0-admin.zip
-rw-r--r-- 1 root   root    27540587 Jul 22 10:06 ranger-2.0.0-atlas-plugin.tar.gz
-rw-r--r-- 1 root   root    27570212 Jul 22 10:06 ranger-2.0.0-atlas-plugin.zip
-rw-r--r-- 1 root   root    30983732 Jul 22 10:09 ranger-2.0.0-elasticsearch-plugin.tar.gz
-rw-r--r-- 1 root   root    31019906 Jul 22 10:09 ranger-2.0.0-elasticsearch-plugin.zip
-rw-r--r-- 1 root   root    26575282 Jul 22 09:53 ranger-2.0.0-hbase-plugin.tar.gz
-rw-r--r-- 1 root   root    26594864 Jul 22 09:53 ranger-2.0.0-hbase-plugin.zip
-rw-r--r-- 1 root   root    23709141 Jul 22 09:51 ranger-2.0.0-hdfs-plugin.tar.gz
-rw-r--r-- 1 root   root    23735788 Jul 22 09:51 ranger-2.0.0-hdfs-plugin.zip
-rw-r--r-- 1 root   root    23745317 Jul 22 09:52 ranger-2.0.0-hive-plugin.tar.gz
-rw-r--r-- 1 root   root    23769378 Jul 22 09:53 ranger-2.0.0-hive-plugin.zip
-rw-r--r-- 1 root   root    39811408 Jul 22 09:55 ranger-2.0.0-kafka-plugin.tar.gz
-rw-r--r-- 1 root   root    39847327 Jul 22 09:56 ranger-2.0.0-kafka-plugin.zip
-rw-r--r-- 1 root   root    90070439 Jul 22 10:04 ranger-2.0.0-kms.tar.gz
-rw-r--r-- 1 root   root    90175690 Jul 22 10:05 ranger-2.0.0-kms.zip
-rw-r--r-- 1 root   root    28272440 Jul 22 09:54 ranger-2.0.0-knox-plugin.tar.gz
-rw-r--r-- 1 root   root    28295654 Jul 22 09:54 ranger-2.0.0-knox-plugin.zip
-rw-r--r-- 1 root   root    23684723 Jul 22 10:08 ranger-2.0.0-kylin-plugin.tar.gz
-rw-r--r-- 1 root   root    23718242 Jul 22 10:08 ranger-2.0.0-kylin-plugin.zip
-rw-r--r-- 1 root   root       34256 Jul 22 10:04 ranger-2.0.0-migration-util.tar.gz
-rw-r--r-- 1 root   root       37740 Jul 22 10:04 ranger-2.0.0-migration-util.zip
-rw-r--r-- 1 root   root    26126862 Jul 22 09:57 ranger-2.0.0-ozone-plugin.tar.gz
-rw-r--r-- 1 root   root    26159348 Jul 22 09:57 ranger-2.0.0-ozone-plugin.zip
-rw-r--r-- 1 root   root    39654366 Jul 22 10:10 ranger-2.0.0-presto-plugin.tar.gz
-rw-r--r-- 1 root   root    39691150 Jul 22 10:10 ranger-2.0.0-presto-plugin.zip
-rw-r--r-- 1 root   root    22146467 Jul 22 10:05 ranger-2.0.0-ranger-tools.tar.gz
-rw-r--r-- 1 root   root    22156287 Jul 22 10:05 ranger-2.0.0-ranger-tools.zip
-rw-r--r-- 1 root   root    26905522 Jul 22 09:58 ranger-2.0.0-solr-plugin.tar.gz
-rw-r--r-- 1 root   root    26938293 Jul 22 09:58 ranger-2.0.0-solr-plugin.zip
-rw-r--r-- 1 root   root       42230 Jul 22 10:03 ranger-2.0.0-solr_audit_conf.tar.gz
-rw-r--r-- 1 root   root       45636 Jul 22 10:03 ranger-2.0.0-solr_audit_conf.zip
-rw-r--r-- 1 root   root    23695951 Jul 22 10:07 ranger-2.0.0-sqoop-plugin.tar.gz
-rw-r--r-- 1 root   root    23724222 Jul 22 10:07 ranger-2.0.0-sqoop-plugin.zip
-rw-r--r-- 1 root   root     4071859 Jul 22 10:06 ranger-2.0.0-src.tar.gz
-rw-r--r-- 1 root   root     6340193 Jul 22 10:06 ranger-2.0.0-src.zip
-rw-r--r-- 1 root   root    36938489 Jul 22 09:54 ranger-2.0.0-storm-plugin.tar.gz
-rw-r--r-- 1 root   root    36963193 Jul 22 09:55 ranger-2.0.0-storm-plugin.zip
-rw-r--r-- 1 root   root    33709608 Jul 22 10:04 ranger-2.0.0-tagsync.tar.gz
-rw-r--r-- 1 root   root    33720483 Jul 22 10:04 ranger-2.0.0-tagsync.zip
-rw-r--r-- 1 root   root    16191997 Jul 22 10:03 ranger-2.0.0-usersync.tar.gz
-rw-r--r-- 1 root   root    16208427 Jul 22 10:04 ranger-2.0.0-usersync.zip
-rw-r--r-- 1 root   root    23701001 Jul 22 09:56 ranger-2.0.0-yarn-plugin.tar.gz
-rw-r--r-- 1 root   root    23730557 Jul 22 09:57 ranger-2.0.0-yarn-plugin.zip
-rw-r--r-- 1 root   root           5 Jul 22 10:10 version
</code></pre>
<h2 id="&#x5B89;&#x88C5;ranger&#x63A7;&#x5236;&#x53F0;&#xFF1A;ranger-admin">&#x5B89;&#x88C5;Ranger&#x63A7;&#x5236;&#x53F0;&#xFF1A;Ranger-admin</h2>
<p>&#x8FD9;&#x91CC;&#x53C8;&#x6298;&#x817E;&#x4E86;&#x51E0;&#x4E2A;&#x5C0F;&#x65F6;&#xFF0C;&#x8FDE;mysql&#x4E00;&#x76F4;&#x5728;&#x62A5;&#x9519;</p>
<pre><code class="lang-shell">tar -zxvf ranger-2.0.0-admin.tar.gz
</code></pre>
<pre><code class="lang-shell">vim install.properties
</code></pre>
<p>&#x8BBE;&#x7F6E;&#x4E86;&#x4E00;&#x5927;&#x5806; &#x8FDE;mysql &#x7684;</p>
<pre><code class="lang-shell">db_root_user=root
db_root_password=Bdp@boc01!
db_host=22.188.12.73

db_name=ranger
db_user=ranger
db_password=Bdp@boc01!

rangerAdmin_password=Bdp@boc01!
rangerTagsync_password=Bdp@boc01!
rangerUsersync_password=Bdp@boc01!
keyadmin_password=Bdp@boc01!


#audit_store=db  &#x5148;&#x6CA1;&#x5F00;&#x5BA1;&#x8BA1; &#x6211;&#x81EA;&#x5DF1;&#x611F;&#x89C9;&#x7528;&#x5904;&#x4E0D;&#x5927;
audit_db_name=ranger_audit
audit_db_user=ranger_audit
audit_db_password=Bdp@boc01!

policymgr_http_enabled=true
policymgr_https_keystore_file=
policymgr_https_keystore_keyalias=rangeradmin
policymgr_https_keystore_password=Bdp@boc01!
</code></pre>
<p>&#x8DD1;&#x8D77;&#x6765;&#x4E00;&#x76F4;&#x5728;&#x62A5;&#x5982;&#x4E0B;&#x9519;&#x8BEF;</p>
<pre><code class="lang-shell">2020-07-15 17:26:19,354  [JISQL] /data/app/jdk11/jdk-11.0.5/bin/java  -cp /data/ranger/lib/mysql-connector-java-5.1.38.jar:/data/ranger/target/ranger-2.0.0-admin/jisql/lib/* org.apache.util.sql.Jisql -driver mysqlconj -cstring jdbc:mysql://22.188.12.73/ranger -u &apos;ranger&apos; -p &apos;********&apos; -noheader -trim -c \;  -query &quot;select 1;&quot;
Wed Jul 15 17:26:20 CST 2020 WARN: Establishing SSL connection without server&apos;s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn&apos;t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to &apos;false&apos;. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.
SQLException : SQL state: 42000 com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Access denied for user &apos;ranger&apos;@&apos;22.188.12.73&apos; to database &apos;ranger&apos; ErrorCode: 1044
2020-07-15 17:26:20,524  [E] Can&apos;t establish connection!! Exiting..
2020-07-15 17:26:20,524  [I] Please run DB setup first or contact Administrator..
2020-07-15 17:26:20,540  [E] &apos;setup_mode&apos; not found in /data/ranger/target/ranger-2.0.0-admin/install.properties file while getting....!!
</code></pre>
<p>&#x62A5;&#x9519;&#x5927;&#x6982;&#x610F;&#x601D;&#x662F;&#x6CA1;&#x6709;&#x6743;&#x9650;</p>
<p>root &#x767B;&#x8FDB;&#x53BB;&#xFF0C;&#x53D1;&#x73B0;root &#x672C;&#x8EAB;&#x6CA1;&#x6709;&#x672C;&#x5730;&#x767B;&#x9646;&#x6743;&#x9650;</p>
<p> &#x6CA1;&#x6709; /tmp/mysql.sock</p>
<p>&#x67E5;&#x770B; /etc/my.cnf</p>
<p>&#x65B0;&#x589E;&#x5BF9;&#x5E94;&#x547D;&#x4EE4;&#x6307;&#x5411;&#x5BF9;&#x5E94;mysqld &#x914D;&#x7F6E;&#x7684;sock</p>
<pre><code class="lang-shell">[clinet]
sock=/ccc/mysql.sock

[mysql]
sock=/ccc/mysql.sock
</code></pre>
<p>&#x6539;&#x5B8C;&#x53D1;&#x73B0; root &#x672C;&#x5730;&#x53EF;&#x4EE5;&#x8FDB;&#x53BB;&#x4E86;&#xFF0C;&#x4F46;&#x662F;&#x8FD8;&#x662F;&#x62A5;&#x4E0A;&#x9762;&#x7684;&#x9519;&#x8BEF;</p>
<p>&#x770B;&#x4E86;&#x4E0B;&#x62A5;&#x9519;&#x7684;&#x4F4D;&#x7F6E;&#x4F3C;&#x4E4E;&#x6709;&#x533A;&#x522B;&#x3002;&#x7F51;&#x4E0A;&#x627E;&#x4E86;&#x4E0B;&#xFF0C;&#x662F;root -h &#x6307;&#x5B9A;&#x5BF9;&#x5E94;ip&#x662F; &#x6CA1;&#x6709;grant &#x6743;&#x9650;</p>
<pre><code class="lang-sql"><span class="hljs-keyword">use</span> mysql ;
<span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">where</span> <span class="hljs-keyword">user</span>=<span class="hljs-string">&apos;root&apos;</span> ;
</code></pre>
<pre><code class="lang-sql"><span class="hljs-keyword">update</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">set</span> grant_priv=<span class="hljs-string">&apos;Y&apos;</span> <span class="hljs-keyword">where</span> <span class="hljs-keyword">User</span>=<span class="hljs-string">&apos;root&apos;</span> ;
<span class="hljs-keyword">FLUSH</span> <span class="hljs-keyword">PRIVILEGES</span>;
</code></pre>
<p>&#x521D;&#x59CB;&#x5316; &#x52A0;&#x542F;&#x52A8;web</p>
<pre><code class="lang-shell">./setup.sh
ews/ranger-admin-services.sh start
</code></pre>
<p>&#x542F;&#x52A8;&#x540E;&#x53EF;&#x4EE5;&#x770B;&#x5230; 6080 &#x7AEF;&#x53E3;&#x7684;web&#x7AEF;</p>
<h2 id="&#x5B89;&#x88C5;ranger-usersync">&#x5B89;&#x88C5;ranger Usersync</h2>
<p><a href="https://blog.csdn.net/andyguan01_2/article/details/88950551" target="_blank">https://blog.csdn.net/andyguan01_2/article/details/88950551</a></p>
<p>&#x9700;&#x8981;&#x4F7F;&#x7528;root&#x7528;&#x6237;</p>
<p>Ranger Usersync&#x4F1A;&#x5C06;linux&#x7CFB;&#x7EDF;&#x7528;&#x6237;&#x540C;&#x6B65;&#x5230;ranger&#x6570;&#x636E;&#x5E93;&#x3002;</p>
<p><strong>6.1 &#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;install.properties</strong></p>
<pre><code>cd /u01/app/ranger-2.0.0/ranger-2.0.0-SNAPSHOT-usersync
vi install.properties
12
</code></pre><p>&#x4FEE;&#x6539;&#x7684;&#x53C2;&#x6570;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>POLICY_MGR_URL=http://10.200.4.117:6080
SYNC_SOURCE=unix
#&#x591A;&#x4E45;&#x540C;&#x6B65;&#x4E00;&#x6B21;&#x6570;&#x636E;&#xFF0C;&#x5355;&#x4F4D;&#x4E3A;&#x5206;&#x949F;
SYNC_INTERVAL=1
logdir=/data/ranger/logs/usersync
12345
</code></pre><p><strong>6.2 &#x6267;&#x884C;&#x521D;&#x59CB;&#x5316;&#x8BBE;&#x7F6E;</strong></p>
<p>&#x6267;&#x884C;.&#xFF1A;</p>
<pre><code>/setup.sh
1
</code></pre><p><strong>6.3 &#x542F;&#x52A8;Ranger Usersync</strong></p>
<p>&#x6267;&#x884C;&#xFF1A;</p>
<pre><code>./ranger-usersync-services.sh start
1
</code></pre><p>ranger-usersync-services.sh&#x7684;&#x53C2;&#x6570;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code>[root@oracle02 ranger-2.0.0-SNAPSHOT-usersync]# ./ranger-usersync-services.sh
Invalid argument [];
Usage: Only start | stop | restart | version, are supported.
123
</code></pre><p>&#x9A8C;&#x8BC1;&#x662F;&#x5426;&#x5B89;&#x88C5;&#x6210;&#x529F;&#xFF1A;&#x6253;&#x5F00;Ranger&#x63A7;&#x5236;&#x53F0;&#x9875;&#x9762;&#xFF0C;&#x70B9;&#x51FB;&#x201C;Settings-&gt;Users/Groups&#x201D;&#xFF0C;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4ECE;Linux&#x540C;&#x6B65;&#x8FC7;&#x6765;&#x7684;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x5219;&#x8BF4;&#x660E;&#x6210;&#x529F;&#x3002;&#x5982;&#x4E0B;&#xFF1A;
<img src="https://img-blog.csdnimg.cn/20190402172337802.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h2 id="&#x88C5;hive&#x63D2;&#x4EF6;">&#x88C5;hive&#x63D2;&#x4EF6;</h2>
<h3 id="&#x5728;hive-server2-&#x8282;&#x70B9;&#x5B89;&#x88C5;hive-plugin">&#x5728;hive-server2 &#x8282;&#x70B9;&#x5B89;&#x88C5;hive-plugin</h3>
<p>&#x53C2;&#x8003;&#x6587;&#x6863; &#xFF08;ps:&#x5927;&#x4F6C;&#x5F88;&#x5954;&#x653E;&#xFF0C;&#x683C;&#x5F0F;&#x4E00;&#x56E2;&#x7CCA; &#x1F92E;&#xFF09;</p>
<p><a href="https://blog.csdn.net/huangyq5240/article/details/102721679" target="_blank">https://blog.csdn.net/huangyq5240/article/details/102721679</a></p>
<p>&#x76F4;&#x63A5;&#x7C98;&#x7684;&#x5927;&#x4F6C;&#x7684;&#xFF0C;&#x76EE;&#x5F55; 6.3.2 &#x5BF9;&#x5E94;&#x8981;&#x6362;&#xFF0C;&#x4E3B;&#x8981;&#x5C31;&#x662F; &#x628A; ranger-hive-plugin&#x7684;&#x5305;&#x653E;&#x5230; cdh &#x91CC;&#x53BB;</p>
<pre><code class="lang-shell">## &#x653E;&#x5230;&#x5BF9;&#x5E94;&#x7684;cdh&#x76EE;&#x5F55;&#x4E0B;&#x53BB; 
cp /home/xxxxxxx/ranger-0.5.4-SNAPSHOT-hive-plugin.tar.gz /opt/cloudera/parcels/CDH/lib

## &#x8F6F;&#x8FDE;&#x63A5;&#x6216;&#x6539;&#x540D;&#x5B57; 
 ln -s ranger-0.5.4-SNAPSHOT-hive-plugin ranger-hive-plugin
</code></pre>
<pre><code class="lang-shell"> ## &#x6539;&#x914D;&#x7F6E;
 cd ranger-hive-plugin/
 vim install.properties
</code></pre>
<pre><code class="lang-properties">#&#x5BF9;&#x5E94;&#x627E;&#x5230;&#x66F4;&#x6539;
## &#x5FC5;&#x987B;&#x6539;
POLICY_MGR_URL=http://172.17.8.94:6080
REPOSITORY_NAME=hivedev

## &#x5BA1;&#x8BA1;&#xFF08;&#x6211;&#x6CA1;&#x6539;&#xFF09;
XAAUDIT.SOLR.ENABLE=true
XAAUDIT.SOLR.URL=http://172.17.8.4:6083/solr/ranger_audits
XAAUDIT.SOLR.FILE_SPOOL_DIR=/var/log/hive/audit/solr/spool

## &#x6539;
CUSTOM_USER=hive
CUSTOM_GROUP=hive
</code></pre>
<p>&#x542F;&#x52A8;&#xFF0C;&#x6700;&#x7EC8;&#x5176;&#x5B9E;&#x662F; &#x8981;&#x91CD;&#x542F; hiveserver2 &#x624D;&#x4F1A;&#x751F;&#x6548;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x6211;&#x89C9;&#x5F97;&#x53EA;&#x662F;&#x4E1C;&#x897F;&#x5206;&#x53D1;&#x4E86;&#x4E0B;</p>
<pre><code class="lang-shell">#&#x542F;&#x52A8;&#x63D2;&#x4EF6;&#xFF0C;&#x611F;&#x89C9;&#x5176;&#x5B9E;&#x5C31;&#x662F; &#x628A;&#x4E1C;&#x897F;&#x4E00;&#x987F;&#x590D;&#x5236;&#xFF0C;&#x6CA1;&#x5177;&#x4F53;&#x770B;
./enable-hive-plugin.sh

## /opt/cloudera/parcels/CDH/lib/ranger-hive-plugin/enable-hive-plugin.sh
</code></pre>
<p>&#x6539;cm-agent &#x5BF9;&#x5E94;&#x7684;&#x5206;&#x53D1;&#x7A0B;&#x5E8F;&#xFF0C;&#x6211;&#x611F;&#x89C9;&#x662F; &#x4FDD;&#x8BC1;ranger&#x751F;&#x6210;&#x7684;&#x4E09;&#x4E2A;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x53EF;&#x4EE5;&#x540C;&#x6B65;&#x5230;&#x5BF9;&#x5E94;&#x7684; impala ,hivemeta, hiveserver2 &#x7B49;&#x670D;&#x52A1;&#x4E0A;&#x53BB;</p>
<pre><code class="lang-shell">find / -name &quot;cloudera-config.sh&quot; 
## &#x627E;&#x4E2A;&#x5408;&#x9002;&#x7684;&#xFF0C;&#x5BF9;&#x5E94;&#x7684;&#x4F4D;&#x7F6E;
## &#x5927;&#x4F6C;&#x7684;&#x4F4D;&#x7F6E; sudo vim /usr/lib64/cmf/service/common/cloudera-config.sh
vim /opt/cloudera/cm-agent/service/common/cloudera-config.sh
</code></pre>
<pre><code class="lang-shell"># When created, the final resting place of config files is unknown,
# so it is marked as . We know what this directory will
# be here in this script, so search-replace it.
replace_conf_dir() {
find $CONF_DIR -type f ! -path &quot;$CONF_DIR/logs/*&quot; ! -name &quot;*.log&quot; ! -name &quot;*.keytab&quot; ! -name &quot;*jceks&quot; -exec perl -pi -e &quot;s##$CONF_DIR#g&quot; {} \;

### &#x4EE5;&#x4E0B;&#x4E3A;&#x65B0;&#x589E;,&#x628A;&#x5BF9;&#x5E94;&#x7684;ranger &#x7684;&#x914D;&#x7F6E;&#x540C;&#x6B65;&#x5230; &#x4E3B;&#x914D;&#x7F6E;, hive

[[ -e /etc/hive/conf/ranger-hive-audit.xml ]] &amp;&amp; {
scp /etc/hive/conf/ranger-hive-audit.xml $CONF_DIR/
scp /etc/hive/conf/ranger-hive-security.xml $CONF_DIR/
scp /etc/hive/conf/ranger-policymgr-ssl.xml $CONF_DIR/ ;
}

### &#x4EE5;&#x4E0B;&#x662F; yarn &#x7684;
[[ -e /etc/hadoop/conf/ranger-yarn-audit.xml ]] &amp;&amp; {
scp  /etc/hadoop/conf/ranger-policymgr-ssl.xml     $CONF_DIR/
scp  /etc/hadoop/conf/ranger-security.xml          $CONF_DIR/
scp  /etc/hadoop/conf/ranger-yarn-audit.xml        $CONF_DIR/
scp  /etc/hadoop/conf/ranger-yarn-security.xml     $CONF_DIR/ ;}


}
</code></pre>
<pre><code class="lang-shell">sh scpCycle.sh  /data/opt_cloudera/cm-agent/service/common/cloudera-config.sh
sh cycle.sh &quot;chown cloudera-scm:cloudera-scm /data/opt_cloudera/cm-agent/service/common/cloudera-config.sh ;chmod 755 /data/opt_cloudera/cm-agent/service/common/cloudera-config.sh&quot;

sh scpCycle.sh  /opt/cloudera/parcels/CDH/lib/ranger-hive-plugin
</code></pre>
<p>&#x4E4B;&#x540E;&#x8FD8;&#x662F;&#x62A5;&#x4E86;&#x53E6;&#x4E00;&#x4E2A;&#x9519;&#xFF1A;</p>
<pre><code class="lang-css">Error: Could not open client transport with JDBC Uri: jdbc:hive2://10.10.6.105:10000: Failed to open new session: java.lang.IllegalArgumentException: Cannot modify hive.query.redaction.rules at runtime. It is not in list of params that are allowed to be modified at runtime (state=08S01,code=0)
1
</code></pre>
<p>&#x62A5;&#x9519;&#x63D0;&#x53CA;can not modify hive.query.redaction.rules
&#x53BB;&#x67E5;&#x770B;&#x8FD9;&#x4E2A;&#x5728;&#x54EA;&#x513F;&#xFF1A;
cd /etc/hive
grep -rni &#x201C;hive.query.redaction.rules&#x201D;
<img src="https://img-blog.csdnimg.cn/20200513160713470.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x53BB;&#x6389;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D; hive-env.sh &#x4E2D;&#x7B2C;7&#x884C;&#x52A0;&#x8F7D;&#x4E86;&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x9879;hive.query.redaction.rules&#x6821;&#x9A8C;&#x53C2;&#x6570;&#x3002;</p>
<pre><code class="lang-shell">### &#x4EE5;&#x4E0B;&#x4E3A;&#x5168;&#x90E8;&#x914D;&#x5B8C;&#x540E; &#x6211;&#x627E;&#x5230;&#x7684;&#x7ED3;&#x679C;

[root@hshv01 ~]# find / -name &quot;ranger-hive-audit.xml&quot;
/run/cloudera-scm-agent/process/1898-host-inspector/ranger-hive-audit.xml
/run/cloudera-scm-agent/process/1863-impala-IMPALAD/ranger-hive-audit.xml
/run/cloudera-scm-agent/process/1843-hive-HIVEMETASTORE/ranger-hive-audit.xml
/run/cloudera-scm-agent/process/1842-hive-HIVESERVER2/ranger-hive-audit.xml
/run/cloudera-scm-agent/process/1837-impala-IMPALAD/ranger-hive-audit.xml
/run/cloudera-scm-agent/process/1816-hive-HIVESERVER2/ranger-hive-audit.xml
/run/cloudera-scm-agent/process/1817-hive-HIVEMETASTORE/ranger-hive-audit.xml
/etc/hive/conf.cloudera.hive/ranger-hive-audit.xml
/opt/cloudera/parcels/CDH-6.3.2-1.cdh6.3.2.p0.1605554/lib/ranger-hive-plugin/install/conf.templates/enable/ranger-hive-audit.xml
</code></pre>
<h3 id="cdh&#x914D;&#x7F6E;&#x914D;&#x7F6E;&#x6743;&#x9650;&#x542F;&#x7528;">CDH&#x914D;&#x7F6E;&#x914D;&#x7F6E;&#x6743;&#x9650;&#x542F;&#x7528;</h3>
<p>&#x7EE7;&#x7EED;&#x53C2;&#x8003;&#x4E0A;&#x9762; &#x914D;0.5 ranger &#x7684;&#x5927;&#x4F6C;&#xFF0C;&#x8FD9;&#x91CC;&#x5F00;&#x59CB;&#x641E; hive &#x7684;&#x6743;&#x9650;&#x5F00;&#x542F;</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>hive.security.authorization.enabled<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>hive.security.authorization.manager<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>org.apache.ranger.authorization.hive.authorizer.RangerHiveAuthorizerFactory<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>hive.security.authenticator.manager<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>org.apache.hadoop.hive.ql.security.SessionStateUserAuthenticator<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>hive.conf.restricted.list<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>hive.security.authorization.enabled,hive.security.authorization.manager,hive.security.authenticator.manager<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

<span class="hljs-comment">&lt;!-- &#x8FDE;&#x63A5;&#x5F02;&#x5E38;&#x89E3;&#x51B3; --&gt;</span>
<span class="hljs-comment">&lt;!-- &#x8FDE;&#x63A5;&#x5F02;&#x5E38;&#x89E3;&#x51B3; ,&#x6240;&#x6709;&#x53C2;&#x6570; &#x8981;&#x6C42;&#x5199;&#x4E3A;var.  ,&#x5F15;&#x7528;&#x65F6;&#x4F7F;&#x7528; ${hiveconf:var.xxx} &#x6A21;&#x5F0F;--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>hive.security.authorization.sqlstd.confwhitelist.append<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>mapred.*|hive.*|mapreduce.*|spark.*|var.*|flink.*<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>hive.security.authorization.sqlstd.confwhitelist<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>mapred.*|hive.*|mapreduce.*|spark.*|var.*|flink.*<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>


&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;&#x2014;
&#x7248;&#x6743;&#x58F0;&#x660E;&#xFF1A;&#x672C;&#x6587;&#x4E3A;CSDN&#x535A;&#x4E3B;&#x300C;huangyq5240&#x300D;&#x7684;&#x539F;&#x521B;&#x6587;&#x7AE0;&#xFF0C;&#x9075;&#x5FAA;CC 4.0 BY-SA&#x7248;&#x6743;&#x534F;&#x8BAE;&#xFF0C;&#x8F6C;&#x8F7D;&#x8BF7;&#x9644;&#x4E0A;&#x539F;&#x6587;&#x51FA;&#x5904;&#x94FE;&#x63A5;&#x53CA;&#x672C;&#x58F0;&#x660E;&#x3002;
&#x539F;&#x6587;&#x94FE;&#x63A5;&#xFF1A;https://blog.csdn.net/huangyq5240/article/details/102721679
</code></pre>
<p>&#x5B9E;&#x9645;&#x5728; cdh &#x91CC; &#x5728; hive &#x9AD8;&#x7EA7;&#x91CC;&#x6DFB;&#x52A0;&#x6743;&#x9650;&#x7BA1;&#x7406;</p>
<p>&#x5728;hive site &#x91CC;&#x6709;&#x5F88;&#x591A;&#xFF0C;&#x5BF9;&#x5E94; &#x914D;&#x7F6E;&#x611F;&#x89C9;&#x662F; &#x7528;&#x4E8E; hive client &#x7684;&#x6743;&#x9650;&#x5C01;&#x9501;</p>
<p><img src=".assets/image-20200724153829420.png" alt="image-20200724153829420"></p>
<h3 id="ranger-admin-&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;&#x5305;">ranger-admin &#x6DFB;&#x52A0;&#x4F9D;&#x8D56;&#x5305;</h3>
<p>&#x914D;&#x7F6E;ranger-admin &#x91CC;&#x6DFB;&#x52A0; hive-dev </p>
<p><img src=".assets/image-20200803112824811.png" alt="image-20200803112824811"></p>
<p>test connection &#x5931;&#x8D25;</p>
<p><a href="https://m.cppentry.com/bencandy.php?fid=117&amp;id=186236" target="_blank">https://m.cppentry.com/bencandy.php?fid=117&amp;id=186236</a></p>
<p>&#x9700;&#x8981;&#x5728; admin &#x7684; &#x4E0B;&#x65B0;&#x589E;&#x5BF9;&#x5E94;&#x7684; jdbc &#x7684; lib&#x5305; &#xFF08;&#x597D;&#x50CF;&#x662F; &#x786E;&#x5B9E;&#x6CA1;&#x6709;&#x5BF9;&#x5E94;&#x7684;&#x5305;&#xFF0C;&#x611F;&#x89C9;&#x6700;&#x597D;&#x505A;&#x8F6F;&#x8FDE;&#x63A5;&#xFF0C;&#x56DE;&#x5934;&#x6709;&#x7A7A;&#x518D;&#x6539;&#xFF09;</p>
<pre><code class="lang-shell">from_dir=/opt/cloudera/parcels/CDH-6.3.2-1.cdh6.3.2.p0.1605554/jars
## dest_dir=/data/ranger/ranger-2.0.0-admin/ews/webapp/WEB-INF/classes/ranger-plugins/
dest_dir=/app/ranger_admin/ews/webapp/WEB-INF/classes/ranger-plugins/


cp -r  ${from_dir}/hive-common*.jar ${dest_dir}/hive   
cp -r  ${from_dir}/hive-jdbc*.jar   ${dest_dir}//hive     
cp -r  ${from_dir}/hive-exec*.jar   ${dest_dir}/hive     
cp -r  ${from_dir}/hive-metastore*.jar ${dest_dir}/hive
cp -r  ${from_dir}/hive-service*.jar ${dest_dir}/hive  


scp -r  ${from_dir}/hadoop-yarn-api-3.0.0-cdh6.3.2.jar  ${dest_dir}/yarn/hadoop-yarn-api-3.0.0.jar
scp -r  ${from_dir}/hadoop-common-3.0.0-cdh6.3.2.jar   ${dest_dir}/yarn/hadoop-common-3.0.0.jar 
scp -r  ${from_dir}/hadoop-yarn-server-resourcemanager*.jar   ${dest_dir}/yarn/hadoop-common-3.0.0.jar
</code></pre>
<p>test &#x6210;&#x529F;&#xFF0C;save &#x65F6;&#x4F1A;&#x8F6C;&#x5708;&#x3002;&#x65F6;&#x95F4;&#x5F88;&#x957F;&#xFF08;&#x6211;&#x662F;&#x7B49;&#x4E86;10&#x5206;&#x949F;&#x4EE5;&#x4E0A;&#xFF09;&#xFF0C;&#x7B49;&#x3002;</p>
<h3 id="&#x91CD;&#x542F;hiveserver2">&#x91CD;&#x542F;hiveserver2</h3>
<p>cdh &#x4E0A;&#x64CD;&#x4F5C;&#x91CD;&#x542F; hiveserver2 </p>
<h3 id="&#x914D;&#x7F6E;&#x5BF9;&#x5E94;&#x914D;&#x7F6E;hive&#x7B56;&#x7565;">&#x914D;&#x7F6E;&#x5BF9;&#x5E94;&#x914D;&#x7F6E;hive&#x7B56;&#x7565;</h3>
<h2 id="yarn&#x63D2;&#x4EF6;">yarn&#x63D2;&#x4EF6;</h2>
<h3 id="&#x628A;&#x5305;&#x653E;&#x5230;cdh-&#x8FD9;&#x4E2A;&#x76EE;&#x5F55;&#x4E0B;">&#x628A;&#x5305;&#x653E;&#x5230;cdh &#x8FD9;&#x4E2A;&#x76EE;&#x5F55;&#x4E0B;</h3>
<p>&#x76F4;&#x63A5;&#x7C98;&#x7684;&#x5927;&#x4F6C;&#x7684;&#xFF0C;&#x76EE;&#x5F55; 6.3.2 &#x5BF9;&#x5E94;&#x8981;&#x6362;&#xFF0C;&#x4E3B;&#x8981;&#x5C31;&#x662F; &#x628A; ranger-hive-plugin&#x7684;&#x5305;&#x653E;&#x5230; cdh &#x91CC;&#x53BB;</p>
<pre><code class="lang-shell">
## &#x89E3;&#x5F00;&#x5305; &#x6539;&#x540D;&#x5B57;&#x4E3A; ranger-yarn-plugin
tar -zxvf *yarn*.gz
mv *yarn*-plugin   ranger-yarn-plugin

## &#x653E;&#x5230;&#x5BF9;&#x5E94;&#x7684;cdh&#x76EE;&#x5F55;&#x4E0B;&#x53BB; 
mv  ranger-yarn-plugin /opt/cloudera/parcels/CDH/lib/
</code></pre>
<h3 id="enable-agentsh&#x914D;&#x7F6E;">enable-agent.sh&#x914D;&#x7F6E;</h3>
<p>&#x95EE;&#x9898;&#x63CF;&#x8FF0;</p>
<ul>
<li>hdfs&#x548C;yarn&#x63D2;&#x4EF6;&#x5B89;&#x88C5;&#x90E8;&#x7F72;&#x540E;&#xFF0C;&#x63D2;&#x4EF6;jar&#x5305;&#x4F1A;&#x90E8;&#x7F72;&#x5230;&#x7EC4;&#x4EF6;&#x5B89;&#x88C5;&#x76EE;&#x5F55;&#x7684;share/hadoop/hdfs/lib&#x5B50;&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x542F;&#x52A8;hdfs&#x6216;yarn&#x8FD0;&#x884C;&#x65F6;&#x52A0;&#x8F7D;&#x4E0D;&#x5230;&#x8FD9;&#x4E9B;jar&#x5305;&#xFF0C;&#x4F1A;&#x62A5;ClassNotFoundException: Class org.apache.ranger.authorization.yarn.authorizer.RangerYarnAuthorizer not found</li>
</ul>
<p>&#x89E3;&#x51B3;&#x529E;&#x6CD5;</p>
<p>&#x4FEE;&#x6539;agents-common&#x6A21;&#x5757;enable-agent.sh&#x811A;&#x672C;&#x6587;&#x4EF6;&#xFF1A;</p>
<ul>
<li>&#x5C06;</li>
</ul>
<pre><code class="lang-shell">
    208     HCOMPONENT_LIB_DIR=${HCOMPONENT_INSTALL_DIR}/share/hadoop/hdfs/lib

    234     HCOMPONENT_CONF_DIR=${HCOMPONENT_INSTALL_DIR}/config
</code></pre>
<p>&#x4FEE;&#x6539;&#x4E3A;&#xFF1A;</p>
<pre><code class="lang-shell">
    208     HCOMPONENT_LIB_DIR=${HCOMPONENT_INSTALL_DIR}

    234     HCOMPONENT_CONF_DIR=${PROJ_LIB_DIR}/ranger-kafka-plugin-impl
</code></pre>
<h3 id="&#x6539;installproperties">&#x6539;install.properties</h3>
<pre><code class="lang-properties">POLICY_MGR_URL=http://192.168.4.50:6080

REPOSITORY_NAME=yarndev

## &#x4E0B;&#x9762;&#x8FD9;&#x4E2A;&#x9ED8;&#x8BA4;&#x662F;hadoop &#xFF0C;&#x6211;&#x653E;&#x5230;&#x4E86;cdh &#x7684;lib&#x76EE;&#x5F55;&#x4E0B;&#xFF0C;&#x5BF9;&#x4E8E;&#x76EE;&#x5F55;&#x5C31;&#x662F;&#x5B50;&#x76EE;&#x5F55; hadoop &#xFF0C;&#x4E0D;&#x7528;&#x6539;
## COMPONENT_INSTALL_DIR_NAME=/opt/cloudera/parcels/CDH-6.3.2-1.cdh6.3.2.p0.1605554/lib/hadoop
</code></pre>
<p>&#x6211;&#x53EA;&#x6539;&#x4E86;&#x8FD9;&#x4FE9;&#xFF0C;&#x6CA1;&#x5F00;solr &#x5BA1;&#x8BA1;&#xFF0C;&#x6CA1;&#x6539;&#x7528;&#x6237;&#xFF0C;&#x5BF9;&#x5E94;&#x7684; &#x7528;&#x6237;&#x4E3A;&#x9ED8;&#x8BA4; yarn &#xFF0C;&#x7EC4;hadoop</p>
<h3 id="&#x542F;&#x52A8;">&#x542F;&#x52A8;</h3>
<pre><code class="lang-shell">./enable-yarn-plugin.sh
</code></pre>
<h3 id="&#x4FEE;&#x6539;yarn-sitexml&#x914D;&#x7F6E;&#x6587;&#x4EF6;">&#x4FEE;&#x6539;yarn-site.xml&#x914D;&#x7F6E;&#x6587;&#x4EF6;</h3>
<p>YARN&#x63D2;&#x4EF6;&#x5B89;&#x88C5;&#x5728;&#x6240;&#x6709;ResourceManager&#x8282;&#x70B9;&#x670D;&#x52A1;&#x5668;&#x4E0A;</p>
<p>&#x5728;CDH&#x7BA1;&#x7406;&#x754C;&#x9762;&#x914D;&#x7F6E;YARN&#x53C2;&#x6570;&#xFF0C;&#x914D;&#x7F6E;&#x201C;<strong>yarn-site.xml</strong> &#x7684; <strong>ResourceManager</strong> &#x9AD8;&#x7EA7;&#x914D;&#x7F6E;&#x4EE3;&#x7801;&#x6BB5;&#x201D;&#xFF0C;&#x65B0;&#x589E;&#x53C2;&#x6570;&#x914D;&#x7F6E;&#xFF1A;</p>
<p>yarn.authorization-provider=org.apache.ranger.authorization.yarn.authorizer.RangerYarnAuthorizer</p>
<p>cdh yarn &#x9AD8;&#x7EA7;&#x91CC;&#x6DFB;&#x52A0;</p>
<p>&#x6DFB;&#x52A0;&#x5982;&#x4E0B;&#x5C5E;&#x6027;&#xFF1A;</p>
<pre><code class="lang-xml"><span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.acl.enable<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">property</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>yarn.authorization-provider<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">value</span>&gt;</span>org.apache.ranger.authorization.yarn.authorizer.RangerYarnAuthorizer<span class="hljs-tag">&lt;/<span class="hljs-name">value</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
</code></pre>
<h1 id="ranger&#x641E;api-&#x5305;&#x4E00;&#x5C42;&#x76AE;">ranger&#x641E;api &#x5305;&#x4E00;&#x5C42;&#x76AE;</h1>
<p>Apache Ranger is a framework to enable, monitor and manage comprehensive data security across the Hadoop platform. Apache Ranger currently provides a centralized security adminstration, fine grain access control and detailed auditing for user access within Apache Hadoop, Apache Hive, Apache HBase and other Apache components</p>
<p>api&#x76EE;&#x524D;&#x53EA;&#x6709;0.6&#x7248;&#x672C;</p>
<p><a href="https://cwiki.apache.org/confluence/display/RANGER/Apache+Ranger+0.6+-+REST+APIs+for+Service+Definition,+Service+and+Policy+Management" target="_blank">https://cwiki.apache.org/confluence/display/RANGER/Apache+Ranger+0.6+-+REST+APIs+for+Service+Definition,+Service+and+Policy+Management</a></p>
<p>2.1&#x7248;&#x672C;api</p>
<p><a href="http://ranger.apache.org/apidocs/ui/index.html" target="_blank">http://ranger.apache.org/apidocs/ui/index.html</a></p>
<pre><code class="lang-shell">

USR_CONFIG=$1
RANGER_URL=22.188.12.73:6080
ADMIN_PASSWD=Bdp@boc01!

## &#x53D1;&#x9001;&#x521B;&#x5EFA;&#x7528;&#x6237;curl -u admin:${ADMIN_PASSWD} -v -i -s -X POST -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; http://${RANGER_URL}/service/xusers/secure/users -d@${USR_CONFIG}


##
</code></pre>
<h2 id="&#x521B;&#x5EFA;&#x7EC4;"><strong>&#x521B;&#x5EFA;&#x7EC4;</strong></h2>
<pre><code class="lang-shell">curl -u admin:Bdp@boc01! -v -i -s -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; -X POST &apos;http://22.188.12.73:6080/service/xusers/secure/groups&apos; -d &apos;{&quot;name&quot;:&quot;iisp22&quot;,&quot;description&quot;:&quot;iisp - add from bft_manager&quot;}&apos;



curl -u admin:Bdp@boc01! --request POST &apos;http://22.188.12.73:6080/service/xusers/secure/groups&apos; \
--header &apos;Content-Type: application/json&apos; \
--data-raw &apos;{&quot;name&quot;:&quot;iisp&quot;,&quot;description&quot;:&quot;iisp - add from bft_manager&quot;}&apos;
</code></pre>
<ul>
<li>groupSource:0&#x8868;&#x793A;<strong>Internal</strong>&#xFF0C;1&#x8868;&#x793A;<strong>External</strong></li>
</ul>
<h2 id="&#x521B;&#x5EFA;&#x7528;&#x6237;"><strong>&#x521B;&#x5EFA;&#x7528;&#x6237;</strong></h2>
<pre><code class="lang-shell">curl -u admin:Bdp@boc01! -v -i -s -X POST -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; http://22.188.12.73:6080/service/xusers/secure/users -d@userfile.json

curl -u admin:Bdp@boc01! -v -i -s -X POST -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; http://22.188.12.73:6080/service/xusers/secure/users -d &apos;{ &quot;name&quot;:&quot;mqddd&quot;, 
 &quot;firstName&quot;:&quot;mqeee&quot;, 
 &quot;lastName&quot;: &quot;mqccc&quot;,
 &quot;loginId&quot;: &quot;mqccc&quot;, 
 &quot;emailAddress&quot; : null, 
 &quot;description&quot; : &quot;mqccc - add fromambari&quot;, 
 &quot;password&quot; : &quot;Bdp@boc01!&quot;, 
 &quot;groupIdList&quot;:[ &quot;hadoop&quot; ],
 &quot;status&quot;:1, 
 &quot;isVisible&quot;:1, 
 &quot;userRoleList&quot;: [ &quot;ROLE_USER&quot; ], 
 &quot;userSource&quot;:1 }&apos;
</code></pre>
<p>&#x6CE8;&#x660E;&#xFF1A;@userfile.json&#x6587;&#x4EF6;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;json&#x683C;&#x5F0F;&#x5B57;&#x7B26;&#x4E32;&#x66FF;&#x6362; -d &#x2018;{... ...}&#x2019;</p>
<p>&#x6CE8;&#x660E;&#xFF1A;&#x67D0;&#x4E9B;&#x63A5;&#x53E3;&#x53EF;&#x80FD;&#x9700;&#x8981;&#x79FB;&#x9664;/secure</p>
<p>&#x6CE8;&#x660E;2&#xFF1A;userfile.json&#x5185;&#x5BB9;&#x4E3E;&#x4F8B;&#x5982;&#x4E0B;</p>
<pre><code class="lang-json">{ <span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;mqddd&quot;</span>, 
 <span class="hljs-string">&quot;firstName&quot;</span>:<span class="hljs-string">&quot;mqccc&quot;</span>, 
 <span class="hljs-string">&quot;lastName&quot;</span>: <span class="hljs-string">&quot;mqccc&quot;</span>,
 <span class="hljs-string">&quot;loginId&quot;</span>: <span class="hljs-string">&quot;mqccc&quot;</span>, 
 <span class="hljs-string">&quot;emailAddress&quot;</span> : <span class="hljs-literal">null</span>, 
 <span class="hljs-string">&quot;description&quot;</span> : <span class="hljs-string">&quot;mqccc - add fromambari&quot;</span>, 
 <span class="hljs-string">&quot;password&quot;</span> : <span class="hljs-string">&quot;Bdp@boc01!&quot;</span>, 
 <span class="hljs-string">&quot;groupIdList&quot;</span>:[<span class="hljs-string">&quot;hadoop&quot;</span>],
 <span class="hljs-string">&quot;status&quot;</span>:<span class="hljs-number">1</span>, 
 <span class="hljs-string">&quot;isVisible&quot;</span>:<span class="hljs-number">1</span>, 
 <span class="hljs-string">&quot;userRoleList&quot;</span>: [ <span class="hljs-string">&quot;ROLE_USER&quot;</span> ], 
 <span class="hljs-string">&quot;userSource&quot;</span>:<span class="hljs-number">1</span> }
</code></pre>
<p>userRoleList&#x53D6;&#x503C;&#xFF1A;&quot;<strong>ROLE_SYS_ADMIN</strong>&quot; &#x6216; &quot;<strong>ROLE_USER</strong>&quot;</p>
<p>&#x79FB;&#x9664;&#x5BC6;&#x7801;&#x5B57;&#x6BB5;&#xFF0C;&#x7528;&#x6237;&#x5C06;&#x53D8;&#x6210;<strong>External</strong>&#x7528;&#x6237;</p>
<p>&quot;userSource&quot;:0&#x8868;&#x793A;<strong>Internal</strong>&#xFF0C;1&#x8868;&#x793A;<strong>External</strong></p>
<h2 id="&#x521B;&#x5EFA;policy">&#x521B;&#x5EFA;policy</h2>
<pre><code class="lang-shell">## &#x767B;&#x9646;&#x6A21;&#x5F0F;
curl --location --request POST &apos;http://22.188.12.73:6080/service/plugins/policies&apos; \
--header &apos;Content-Type: application/json&apos; \
--header &apos;Cookie: RANGERADMINSESSIONID=1EAD5E79135EE8524DFE1B7AC93D62DC&apos; \
--data-raw &apos;{&quot;policyType&quot;:&quot;0&quot;,&quot;name&quot;:&quot;ssss&quot;,&quot;isEnabled&quot;:true,&quot;policyPriority&quot;:0,&quot;policyLabels&quot;:[],&quot;description&quot;:&quot;&quot;,&quot;isAuditEnabled&quot;:true,&quot;resources&quot;:{&quot;database&quot;:{&quot;values&quot;:[&quot;bdp&quot;],&quot;isRecursive&quot;:false,&quot;isExcludes&quot;:false},&quot;table&quot;:{&quot;values&quot;:[&quot;mqtest&quot;],&quot;isRecursive&quot;:false,&quot;isExcludes&quot;:false},&quot;column&quot;:{&quot;values&quot;:[&quot;col2&quot;],&quot;isRecursive&quot;:false,&quot;isExcludes&quot;:false}},&quot;isDenyAllElse&quot;:false,&quot;policyItems&quot;:[{&quot;users&quot;:[&quot;bdp&quot;],&quot;accesses&quot;:[{&quot;type&quot;:&quot;select&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;update&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;create&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;drop&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;alter&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;index&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;lock&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;all&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;read&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;write&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;repladmin&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;serviceadmin&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;tempudfadmin&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;refresh&quot;,&quot;isAllowed&quot;:true}]}],&quot;allowExceptions&quot;:[],&quot;denyPolicyItems&quot;:[],&quot;denyExceptions&quot;:[],&quot;service&quot;:&quot;hivedev&quot;} &apos;




## &#x5BC6;&#x94A5;&#x6A21;&#x5F0F;

curl -u admin:Bdp@boc01! --request POST &apos;http://22.188.12.73:6080/service/plugins/policies&apos; \
--header &apos;Content-Type: application/json&apos; \
--data-raw &apos;{&quot;policyType&quot;:&quot;0&quot;,&quot;name&quot;:&quot;ssss2&quot;,&quot;isEnabled&quot;:true,&quot;policyPriority&quot;:0,&quot;policyLabels&quot;:[],&quot;description&quot;:&quot;&quot;,&quot;isAuditEnabled&quot;:true,&quot;resources&quot;:{&quot;database&quot;:{&quot;values&quot;:[&quot;bdp222&quot;],&quot;isRecursive&quot;:false,&quot;isExcludes&quot;:false},&quot;table&quot;:{&quot;values&quot;:[&quot;mqtest&quot;],&quot;isRecursive&quot;:false,&quot;isExcludes&quot;:false},&quot;column&quot;:{&quot;values&quot;:[&quot;col2&quot;],&quot;isRecursive&quot;:false,&quot;isExcludes&quot;:false}},&quot;isDenyAllElse&quot;:false,&quot;policyItems&quot;:[{&quot;users&quot;:[&quot;bdp&quot;],&quot;accesses&quot;:[{&quot;type&quot;:&quot;select&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;update&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;create&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;drop&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;alter&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;index&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;lock&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;all&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;read&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;write&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;repladmin&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;serviceadmin&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;tempudfadmin&quot;,&quot;isAllowed&quot;:true},{&quot;type&quot;:&quot;refresh&quot;,&quot;isAllowed&quot;:true}]}],&quot;allowExceptions&quot;:[],&quot;denyPolicyItems&quot;:[],&quot;denyExceptions&quot;:[],&quot;service&quot;:&quot;hivedev&quot;} &apos;
</code></pre>
<h2 id="&#x83B7;&#x53D6;&#x7528;&#x6237;&#x4FE1;&#x606F;"><strong>&#x83B7;&#x53D6;&#x7528;&#x6237;&#x4FE1;&#x606F;</strong></h2>
<p>&#x6839;&#x636E;&#x7528;&#x6237;&#x540D;&#x67E5;&#x8BE2;&#xFF0C;&#x4E0D;&#x5305;&#x542B;&#x4E0E;group&#x5173;&#x7CFB;</p>
<p>curl -u admin:admin -v -i -s -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; -X GET http://<ranger_host_address>:6080/service/xusers/users/userName/zhouyuan</ranger_host_address></p>
<p>&#x6839;&#x636E;&#x7528;&#x6237;ID&#x67E5;&#x8BE2;&#xFF0C;&#x5305;&#x542B;&#x4E0E;group&#x5173;&#x7CFB;&#xFF08;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x7528;&#x6237;&#x540D;&#x67E5;&#x8BE2;&#x83B7;&#x53D6;&#x7528;&#x6237;ID&#xFF09;</p>
<p>curl -u admin:admin -v -i -s -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; -X GET http://<ranger_host_address>:6080/service/xusers/secure/users/{id}</ranger_host_address></p>
<h2 id="&#x5220;&#x9664;&#x7528;&#x6237;"><strong>&#x5220;&#x9664;&#x7528;&#x6237;</strong></h2>
<p>&#x8F6F;&#x5220;&#x9664;(&#x5373;&#x5C06;&#x7528;&#x6237;&#x72B6;&#x6001;&#x8BBE;&#x4E3A;Hidden)</p>
<p>curl -u admin:admin -v -i -s -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; -X DELETE<a href="http://172.16.70.55:6080/service/xusers/users/userName/zhouyuan" target="_blank">http://:6080/service/xusers/users/userName/zhouyuan</a></p>
<p>&#x786C;&#x5220;&#x9664;</p>
<p>URL&#x672B;&#x5C3E;&#x6DFB;&#x52A0;&#x53C2;&#x6570;&#xFF1A;forceDelete=true&#xFF0C;&#x5373;</p>
<p>curl -u admin:admin -v -i -s -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; -X DELETE <a href="http://172.16.70.55:6080/service/xusers/users/userName/zhouyuan" target="_blank">http://:6080/service/xusers/users/userName/zhouyuan</a>?forceDelete=true</p>
<h2 id="&#x67E5;&#x8BE2;&#x7EC4;"><strong>&#x67E5;&#x8BE2;&#x7EC4;</strong></h2>
<p>&#x6A21;&#x7CCA;&#x641C;&#x7D22;(&#x53EF;&#x80FD;&#x8FD4;&#x56DE;&#x5217;&#x8868;)&#xFF1A;</p>
<p>curl -u admin:admin -v -i -s -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; -X GET http://<ranger_host_address>:6080/service/xusers/groups?name=group1</ranger_host_address></p>
<p>&#x7CBE;&#x786E;&#x83B7;&#x53D6;&#x6B64;&#x7FA4;&#x4FE1;&#x606F;&#xFF1A;</p>
<p>curl -u admin:admin -v -i -s -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; -X GET<a href="https://blog.csdn.net/ZhouyuanLinli/article/details/78617289" target="_blank">http://:6080/service/xusers/groups/groupName/group1</a></p>
<h2 id="&#x5220;&#x9664;&#x7EC4;"><strong>&#x5220;&#x9664;&#x7EC4;</strong></h2>
<p>curl -u admin:admin -v -i -s -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; -X DELETE <a href="https://blog.csdn.net/ZhouyuanLinli/article/details/78617289" target="_blank">http://:6080/service/xusers/groups</a>/groupName/{groupName}</p>
<p>&#x540C;&#x5220;&#x9664;&#x7528;&#x6237;&#x4E00;&#x6837;&#xFF0C;&#x5206;&#x8F6F;&#x5220;&#x9664;&#x548C;&#x786C;&#x5220;&#x9664;</p>
<h2 id="&#x7EC4;&#x66F4;&#x65B0;&#x7528;&#x6237;&#x6210;&#x5458;"><strong>&#x7EC4;&#x66F4;&#x65B0;&#x7528;&#x6237;&#x6210;&#x5458;</strong></h2>
<p>1&#x3001;&#x6DFB;&#x52A0;&#x65B9;&#x5F0F;&#xFF1A;Ambari&#x4E2D;&#x7EC4;&#x6DFB;&#x52A0;&#x7528;&#x6237;&#xFF0C;Ranger&#x7528;&#x6237;&#x6DFB;&#x52A0;&#x7EC4;</p>
<p>2&#x3001;Ambari&#x5DF2;&#x91C7;&#x7528;python&#x811A;&#x672C;&#x5B9E;&#x73B0;&#x4E86;&#x4E0E;LDAP&#x7528;&#x6237;&#x540C;&#x6B65;</p>
<p>3&#x3001;Ambari&#x7528;&#x6237;&#x53D8;&#x66F4;&#x524D;&#x540E;&#xFF0C;&#x8BC6;&#x522B;&#x54EA;&#x4E9B;&#x7528;&#x6237;&#x65B0;&#x589E;&#x5230;&#x6B64;&#x7EC4;&#xFF0C;&#x54EA;&#x4E9B;&#x7528;&#x6237;&#x4E0D;&#x53D8;&#xFF08;&#x4E0D;&#x7BA1;&#xFF09;&#xFF0C;&#x54EA;&#x4E9B;&#x7528;&#x6237;&#x89E3;&#x7ED1;&#x6B64;&#x7EC4;&#x3002;&#xFF08;&#x9700;&#x8981;&#x67E5;&#x8BE2;&#x4E00;&#x6B21;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#x524D;&#x540E;&#x7528;&#x6237;&#x5BF9;&#x6BD4;&#xFF09;</p>
<p>4&#x3001;&#x6BCF;&#x4E2A;&#x65B0;&#x589E;/&#x89E3;&#x7ED1;&#x7528;&#x6237;&#x8C03;&#x7528;ranger&#x63A5;&#x53E3;&#xFF0C;&#x83B7;&#x53D6;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x4ECE;&#x800C;&#x77E5;&#x9053;&#x7528;&#x6237;{id}&#xFF0C;&#x83B7;&#x53D6;&#x7FA4;&#x7EC4;{id}, put&#x6D88;&#x606F;&#x4FEE;&#x6539;&#x7528;&#x6237;groupIdList&#x5B57;&#x6BB5;&#xFF08;&#x5176;&#x4ED6;&#x5B57;&#x6BB5;&#x4E0D;&#x53D8;&#xFF09;</p>
<p>curl -u admin:admin -v -i -s -X PUT -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; http://<ranger_host_address>:6080/service/xusers/secure/users/{id} -d@userfile.json</ranger_host_address></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="ldap.html" class="navigation navigation-prev " aria-label="Previous page: Ldap">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="数据探查.html" class="navigation navigation-next " aria-label="Next page: 数据探查">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"多租户","level":"1.3.6.5.3","depth":4,"next":{"title":"数据探查","level":"1.3.6.5.4","depth":4,"path":"知识笔记/大数据组件/数据安全与权限管理/数据探查.md","ref":"知识笔记/大数据组件/数据安全与权限管理/数据探查.md","articles":[]},"previous":{"title":"Ldap","level":"1.3.6.5.2","depth":4,"path":"知识笔记/大数据组件/数据安全与权限管理/ldap.md","ref":"知识笔记/大数据组件/数据安全与权限管理/ldap.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["splitter","-lunr","mermaid-gb3","chapter-fold","expandable-chapters","expandable-chapters-small","-search","search-pro","back-to-top-button"],"pluginsConfig":{"chapter-fold":{},"disqus":{"shortName":"druler"},"splitter":{},"search-pro":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"mermaid-gb3":{},"back-to-top-button":{},"expandable-chapters-small":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":true},"expandable-chapters":{}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"知识笔记/大数据组件/数据安全与权限管理/多租户.md","mtime":"2021-02-20T05:57:40.063Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-02-20T06:54:45.284Z"},"basePath":"../../..","book":{"language":""}});
        });
    </script>
</div>

        
    
    <script src="../../../gitbook/gitbook.js"></script>
    <script src="../../../gitbook/theme.js"></script>
    
        
        <script src="../../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-mermaid-gb3/book/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-chapter-fold/chapter-fold.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    <script src="../../../gitbook/gitbook-plugin-mermaid-gb3/mermaid/mermaid.min.js"></script>

    </body>
</html>

